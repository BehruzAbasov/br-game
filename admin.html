<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<style>
body {
  font-family: system-ui;
  background: #0f172a;
  color: white;
  text-align: center;
}
button {
  font-size: 22px;
  padding: 14px 28px;
  margin: 10px;
  border-radius: 12px;
  border: none;
  cursor: pointer;
}
#start { background: #22c55e; }
#reset { background: #ef4444; }
#log { margin-top: 20px; font-size: 20px; }
</style>
</head>
<body>

<h1>ADMIN</h1>

<button id="start">START</button>
<button id="reset">RESET</button>

<div id="log">Disconnected</div>

<script>
const ws = new WebSocket("wss://SENIN-RAILWAY-URL/ws");

const log = document.getElementById("log");

ws.onopen = () => {
  ws.send(JSON.stringify({ role: "admin" }));
  log.innerText = "Connected";
};

ws.onmessage = (e) => {
  const data = JSON.parse(e.data);

  if (data.type === "countdown") {
    log.innerText = "Time: " + data.value;
  }

  if (data.type === "won") {
    log.innerText = `${data.player} WON (${data.reaction} ms)`;
  }

  if (data.type === "time_up") {
    log.innerText = "TIME UP";
  }

  if (data.type === "reset") {
    log.innerText = "RESET";
  }
};

document.getElementById("start").onclick = () => {
  ws.send(JSON.stringify({ action: "start" }));
};

document.getElementById("reset").onclick = () => {
  ws.send(JSON.stringify({ action: "reset" }));
};
</script>

</body>
</html>
